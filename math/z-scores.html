<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-97459416-1"> 
  </script>

  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-97459416-1');
  </script>

  <meta name="author" content="Dan Friedman">
  <meta name="geo.region" content="CA">
  <meta property="og:locale" content="en_us">
  <meta name="robot" content="all">
  <meta name="referrer" content="always">
  <meta property="fb:profile_id" content="1357771151">
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Dan Friedman's Data Science Knowledge Base">

  <meta property="og:see_also" content="https://twitter.com/_DanFriedman"/>
  <meta property="og:see_also" content="https://www.linkedin.com/in/danfriedman33/"/>
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@_DanFriedman">
  <meta name="twitter:image" content="https://pbs.twimg.com/profile_images/950134514113691648/7dt7ECh2_400x400.jpg" />

  <meta name="keywords" content="z-score python">

  <meta name="description" content="Learn how to calculate z-scores, interpret them and implement them in Python using the scipy package">
  <meta property="og:description"  content="Learn how to calculate z-scores, interpret them and implement them in Python using the scipy package">
  <meta name="twitter:description" content="Learn how to calculate z-scores, interpret them and implement them in Python using the scipy package">

  <meta property="og:title" content="Z-scores">
  <meta name="twitter:title" content="Z-scores">

  <link rel="canonical" href="https://dfrieds.com/math/z-scores"/>

  <title>Z-scores - Math</title>

  

  <!-- Latest compiled and minified Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link rel="stylesheet" href="https://dfrieds.com/theme/css/ie10-viewport-bug-workaround.css" />
  
  <!-- Custom styles for this template -->
  <link rel="stylesheet" href="https://dfrieds.com/theme/css/style.css" />

  <!--don't need this for live-->
  <!-- <link rel="stylesheet" href="theme/css/style.css"/> -->

  <link rel="stylesheet" href="https://dfrieds.com/theme/css/notebooks.css" />
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800,900" rel="stylesheet">


  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link href="https://dfrieds.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Dan Friedman's Data Science Knowledge Base Full Atom Feed" />    <link href="https://dfrieds.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Dan Friedman's Data Science Knowledge Base Full RSS Feed" />      <link href="https://dfrieds.com/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Dan Friedman's Data Science Knowledge Base Categories Atom Feed" />    <link href="https://dfrieds.com/feeds/{slug}.rss.xml" type="application/rss+xml" rel="alternate" title="Dan Friedman's Data Science Knowledge Base Categories RSS Feed" />    

  <!-- Start of Async Drift Code -->
  <script>
    !function() {
      var t;
      if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0, 
        t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ], 
        t.factory = function(e) {
          return function() {
            var n;
            return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
          };
        }, t.methods.forEach(function(e) {
          t[e] = t.factory(e);
        }), t.load = function(t) {
          var e, n, o, i;
          e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"), 
          o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js", 
          n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
        });
      }();
    drift.SNIPPET_VERSION = '0.3.1';
    drift.load('83xk3ceba36c');
  </script>
  <!-- End of Async Drift Code -->


</head>

<body>
  <div class="math"></div>

  <nav class="navbar navbar-expand-sm fixed-top">
    <div class="container">
      <a class="navbar-brand" href="https://dfrieds.com/">Dan<span class="green">_</span>Friedman</a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
      aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggle-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="nav navbar-nav mr-auto">
        </ul>
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Tutorials</a>
              
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="https://dfrieds.com/#math">Math</a>
                <a class="dropdown-item" href="https://dfrieds.com/#data-analysis">Data Analysis with Pandas</a>
                <a class="dropdown-item" href="https://dfrieds.com/#dataviz">Data Visualizations</a>
                <a class="dropdown-item" href="https://dfrieds.com/#python">Python</a>
                <a class="dropdown-item" href="https://dfrieds.com/#ml">Machine Learning</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://dfrieds.com/#articles">Articles</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://dfrieds.com/about">About</a>
            </li>
          </ul>
      </div>
    </div>
  </nav>


  <!-- end of header section -->
  <div class="container">

<section id="content" class="body">
  <header>
    <div class="posttype"> 
    Math Descriptive Statistics Article
    </div>
    

    <h1 class="articleh1">
      Z-scores
    </h1>

    <ul class ="row article_info">
      
      <li>
        January 4, 2018&nbsp;&nbsp;&bull;&nbsp;&nbsp;7 min read
      </li>
      <li class="tagarticle">
        Key Terms:         z-score,
        statistics,
        standard deviation,
        normal distribution,
        python,
        pandas
      </li>
    </ul>
  </header>

  <div class='article_content'>
    <p>A <strong>z-score</strong> is the number of standard deviations away from a mean for a data point. A z-score helps point out how <em>unusual</em> or <em>usual</em> a data point is from the other values. A z-score must be used with a normal distribution curve.</p>
<h4>Import Modules</h4>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="kn">as</span> <span class="nn">stats</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span> <span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>


<h4>Visualization styling code</h4>
<div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">12</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">)})</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="s1">&#39;talk&#39;</span><span class="p">)</span>
</pre></div>


<h4>Turn Off Warnings</h4>
<p>I turn warnings off in this post because of an <a href='https://stackoverflow.com/a/52817582'>issue in Scipy</a> that will be fixed in a later version.</p>
<div class="highlight"><pre><span></span><span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>


<h3>Example: z-scores of U.S. Heights</h3>
<p>I generate a pandas DataFrame to simulate heights of people in the U.S. from a normal distribution. Note: in order to calculate z-scores of values, you need a normal distribution.</p>
<div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">population_size</span> <span class="o">=</span> <span class="mi">5000</span>
<span class="n">df_heights</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">2.9</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">population_size</span><span class="p">)})</span>
</pre></div>


<p>Preview <code>df_heights</code>.</p>
<div class="highlight"><pre><span></span><span class="n">df_heights</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>us_height_inches</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>67.440471</td>
    </tr>
    <tr>
      <th>1</th>
      <td>65.599034</td>
    </tr>
    <tr>
      <th>2</th>
      <td>67.878297</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70.416787</td>
    </tr>
    <tr>
      <th>4</th>
      <td>65.320955</td>
    </tr>
  </tbody>
</table>
</div>

<p>Visualize the distribution of <code>df_heights</code> values.</p>
<div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;maroon&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;height [inches]&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;probability of occurence&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Heights of People in U.S.&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.015</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</pre></div>


<p><img alt="png" src="z_scores_files/z_scores_15_0.png"></p>
<p>Calculate the population mean height in the U.S. using the pandas series mean() <a href='https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.mean.html'>method</a>.</p>
<div class="highlight"><pre><span></span><span class="n">pop_mean_us_height_inches</span> <span class="o">=</span> <span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">pop_mean_us_height_inches</span>
</pre></div>


<div class="highlight"><pre><span></span>66.01624559725403
</pre></div>


<p>Calculate the population standard deviation height in the U.S. using the pandas series std() <a href='https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.std.html'>method</a>.</p>
<div class="highlight"><pre><span></span><span class="n">pop_std_dev_us_height_inches</span> <span class="o">=</span> <span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">pop_std_dev_us_height_inches</span>
</pre></div>


<div class="highlight"><pre><span></span>2.889791503580723
</pre></div>


<p>Given any person's height, I can calculate the number of standard deviations that height is from the mean by using the z-score equation:</p>
<div class="math">$$z-{score}=\frac{x-\mu}{\sigma}$$</div>
<ul>
<li><span class="math">\(x\)</span> is a score</li>
<li><span class="math">\(\sigma\)</span> is the population standard deviation</li>
<li><span class="math">\(\mu\)</span> is the population mean</li>
</ul>
<p>Create a new column <code>z-score</code> that's the z-score for each person's height.</p>
<div class="highlight"><pre><span></span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_z-score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">pop_mean_us_height_inches</span><span class="p">)</span><span class="o">/</span><span class="n">pop_std_dev_us_height_inches</span>
</pre></div>


<p>Preview <code>df_heights</code>.</p>
<div class="highlight"><pre><span></span><span class="n">df_heights</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>us_height_inches</th>
      <th>us_z-score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>67.440471</td>
      <td>0.492847</td>
    </tr>
    <tr>
      <th>1</th>
      <td>65.599034</td>
      <td>-0.144374</td>
    </tr>
    <tr>
      <th>2</th>
      <td>67.878297</td>
      <td>0.644355</td>
    </tr>
    <tr>
      <th>3</th>
      <td>70.416787</td>
      <td>1.522788</td>
    </tr>
    <tr>
      <th>4</th>
      <td>65.320955</td>
      <td>-0.240602</td>
    </tr>
  </tbody>
</table>
</div>

<p>Based on the z-scores computed, I can interpret the z-score values. For example, here's an interpretation for a few people:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">df_heights</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
    <span class="n">index_person</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">index_height_inches</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">index_z_score</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="n">index</span> <span class="o">=</span> <span class="n">person</span><span class="p">[</span><span class="n">index_person</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">person</span><span class="p">[</span><span class="n">index_height_inches</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">z_score</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">person</span><span class="p">[</span><span class="n">index_z_score</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;This person at index {0} has an height in inches of {1} and is approximately {2} standard deviations from the U.S. population mean height in inches.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">z_score</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span>This person at index 0 has an height in inches of 67.44 and is approximately 0.49 standard deviations from the U.S. population mean height in inches.

This person at index 1 has an height in inches of 65.6 and is approximately -0.14 standard deviations from the U.S. population mean height in inches.

This person at index 2 has an height in inches of 67.88 and is approximately 0.64 standard deviations from the U.S. population mean height in inches.

This person at index 3 has an height in inches of 70.42 and is approximately 1.52 standard deviations from the U.S. population mean height in inches.

This person at index 4 has an height in inches of 65.32 and is approximately -0.24 standard deviations from the U.S. population mean height in inches.
</pre></div>


<p>In a normal distribution, there is a standard range of values that <em>generally</em> fall within a certain number of standard deviations from the mean:</p>
<table>
<thead>
<tr>
<th>% of total height values</th>
<th>range in distribution</th>
<th>z-scores from mean</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="math">\(68\)</span></td>
<td><span class="math">\(\mu\pm\sigma\)</span></td>
<td><span class="math">\(\pm1\)</span></td>
</tr>
<tr>
<td><span class="math">\(95\)</span></td>
<td><span class="math">\(\mu\pm1.96\sigma\)</span></td>
<td><span class="math">\(\pm1.96\)</span></td>
</tr>
<tr>
<td><span class="math">\(99\)</span></td>
<td><span class="math">\(\mu\pm2.58\sigma\)</span></td>
<td><span class="math">\(\pm2.58\)</span></td>
</tr>
</tbody>
</table>
<p>There are <span class="math">\(5000\)</span> height values in this dataset. Therefore, it's likely approximately <span class="math">\(68\%\)</span> of values are within <span class="math">\(\pm1\)</span> z-scores from the mean. Let's verify this with our dataset.</p>
<div class="highlight"><pre><span></span><span class="n">values_plus_minus_one_z_score</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_z-score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">])</span>
<span class="n">percent_values_plus_minus_one_z_score</span> <span class="o">=</span> <span class="n">values_plus_minus_one_z_score</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">df_heights</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
<span class="n">percent_values_plus_minus_one_z_score</span>
</pre></div>


<div class="highlight"><pre><span></span>68.56
</pre></div>


<p><span class="math">\(68.56\%\)</span> of values fall within <span class="math">\(\pm1\)</span> z-scores from the mean which is very close to <span class="math">\(68\%\)</span></p>
<p>Above, I standardized a distribution by getting every value's z-score. I can now visualize the distribution of z-scores below that correspond to specific height values. The histogram below looks like a normal distribution. The official term for it is a <strong>standard normal distribution</strong>.</p>
<div class="highlight"><pre><span></span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_z-score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;slategray&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Standard Normal Distribution&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.015</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;z-score&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;frequency&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>


<p><img alt="png" src="z_scores_files/z_scores_31_0.png"></p>
<p>Every point in our dataset is now illustrated as the number of standard deviations away from the mean - represented by its z-score.</p>
<p>In the distribution above, the standard deviation is 1.</p>
<div class="highlight"><pre><span></span><span class="n">z_score_distribution_std_dev</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_z-score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">z_score_distribution_std_dev</span>
</pre></div>


<div class="highlight"><pre><span></span>1.0
</pre></div>


<h3>Comparison of Z-Scores from Two Populations</h3>
<p>Above, we had data on heights of people in the U.S. My friend Leslie was born in the U.S. and is 63 inches. My other friend Jamie was born in the Phillipines and is 57 inches tall. I'm curious which of my friends is relatively <em>taller</em> for their respective country's height.</p>
<div class="highlight"><pre><span></span><span class="n">height_leslie_inches</span> <span class="o">=</span> <span class="mi">63</span>
<span class="n">height_jamie_inches</span> <span class="o">=</span> <span class="mi">57</span>
</pre></div>


<p>To get the <em>relative</em> height for each population distribution, I'll calculate the z-score for each friend's height based on the country's population distribution using the z-score equation and round each value to two decimal places. For this example, I created normal distributions of heights for values in the Phillipines and United States.</p>
<p>Using the z-score allows standardization among the two distributions of heights in the U.S. and Phillipines so we can easily compare where Leslie and Jamie reside on each distribution.</p>
<p>The code below generates a normal distribution of heights for people in the Philippines.</p>
<div class="highlight"><pre><span></span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;philippines_height_inches&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">61</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">3.2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">population_size</span><span class="p">)</span>
</pre></div>


<p>The visualization below illustrates the distribution of heights for people in the U.S., Phillippines as well as Leslie's and Jamie's height. </p>
<div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;maroon&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;U.S. heights&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;philippines_height_inches&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;palegoldenrod&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Philippines heights&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">height_leslie_inches</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Leslie&#39;s height&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;indigo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">height_jamie_inches</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Jamie&#39;s height&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;slategrey&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;height [inches]&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;probability of occurence&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Heights in the U.S. and Philippines&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.015</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>


<p><img alt="png" src="z_scores_files/z_scores_40_0.png"></p>
<p>Calculate the population mean height in the Philippines using the pandas series mean() <a href='https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.mean.html'>method</a>.</p>
<div class="highlight"><pre><span></span><span class="n">pop_mean_philippines_height_inches</span> <span class="o">=</span> <span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;philippines_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">pop_mean_philippines_height_inches</span>
</pre></div>


<div class="highlight"><pre><span></span>60.96840353016177
</pre></div>


<p>Calculate the population standard deviation height in the Philippines using the pandas series std() <a href='https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.std.html'>method</a>.</p>
<div class="highlight"><pre><span></span><span class="n">pop_std_dev_philippines_height_inches</span> <span class="o">=</span> <span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;philippines_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">pop_std_dev_philippines_height_inches</span>
</pre></div>


<div class="highlight"><pre><span></span>3.2333986708154616
</pre></div>


<p>Below is a function to calculate a value's z-score.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">z_score</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">population_mean</span><span class="p">,</span> <span class="n">population_std_dev</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to calculate z-score as observation&#39;s value minus population mean divided by population standard deviation.</span>

<span class="sd">    Round value to 2 decimal places.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">round</span><span class="p">((</span><span class="n">value</span> <span class="o">-</span> <span class="n">population_mean</span><span class="p">)</span><span class="o">/</span><span class="n">population_std_dev</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">z_score_leslie_us</span> <span class="o">=</span> <span class="n">z_score</span><span class="p">(</span><span class="n">height_leslie_inches</span><span class="p">,</span> <span class="n">pop_mean_us_height_inches</span><span class="p">,</span> <span class="n">pop_std_dev_us_height_inches</span><span class="p">)</span> 
<span class="n">z_score_jamie_philippines</span> <span class="o">=</span> <span class="n">z_score</span><span class="p">(</span><span class="n">height_jamie_inches</span><span class="p">,</span> <span class="n">pop_mean_philippines_height_inches</span><span class="p">,</span> <span class="n">pop_std_dev_philippines_height_inches</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Leslie has a z-score of {0} for her height relative to U.S. heights and Jamie has a z-score of {1} relative to Philippines heights.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z_score_leslie_us</span><span class="p">,</span> <span class="n">z_score_jamie_philippines</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span>Leslie had a z-score of -1.04 for height relative to U.S. heights and Jamies has a z-score of -1.23 relative to Philippines heights
</pre></div>


<p>Since Leslie's z-score is larger (closer to <span class="math">\(0\)</span>), she's <em>relatively</em> taller compared to people in her country than Jamie is.</p>
<p>There's also a method in the scipy stats module called the <code>zscore()</code> <a href='https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.zscore.html'>method</a> that can calculate z-scores given just a list of values.</p>
<h3>Probability Density Function</h3>
<p>Above, we visualized the distribution of heights and included bars to indicate the frequency or probability for certain height values. We can visualize the same distribution below with <code>probability of occurence</code> on the y-axis and just include the density curve. The total area under this curve represents the probability of all outcomes happening which is equal to <span class="math">\(1\)</span>.</p>
<div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;maroon&quot;</span><span class="p">,</span> <span class="n">hist</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;height [inches]&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;probability of occurence&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of Heights of People in U.S.&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.015</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</pre></div>


<p><img alt="png" src="z_scores_files/z_scores_51_0.png"></p>
<p>For any person's height, we can find the proportion of values greater than or less than that height by finding the appropriate area under the curve.</p>
<h3>Probability of Occurence Given Z-Scores</h3>
<p>With a normal distribution, given an observation's value, I can determine the proportion of observations above or below that value. The steps to do so are to calculate the observation's z-score and then find the appropriate area under the curve on one side of the value.</p>
<p>For example, Leslie's height is 63 inches. For what proportion of people is Leslie taller than in the U.S.?</p>
<p>In the scipy stats module, there's a norm (meaning a normal distribution) class with a <code>cdf</code> <a href='https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html'>method</a> that takes an argument of a z-score for an observation and returns the proportion of values less than that observation.</p>
<div class="highlight"><pre><span></span><span class="n">proportion_of_us_ppl_leslie_taller_than</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">z_score_leslie_us</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">proportion_of_us_ppl_leslie_taller_than</span>
</pre></div>


<div class="highlight"><pre><span></span>0.149
</pre></div>


<p>This proportion value of <span class="math">\(0.149\)</span> is equivalent to <span class="math">\(14.9\%\)</span>. Leslie is taller than just 14.9% of people in the U.S. and she ranks at the 14.9th percentile.</p>
<p>I can visualize her height on the normal distribution and shade the area of heights for which she's taller.</p>
<div class="highlight"><pre><span></span><span class="n">kde</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">gaussian_kde</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">])</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">df_heights</span><span class="p">[</span><span class="s1">&#39;us_height_inches&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">50000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">kde</span><span class="p">(</span><span class="n">pos</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">)</span>
<span class="n">shade</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="n">height_leslie_inches</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">shade</span><span class="p">,</span> <span class="n">kde</span><span class="p">(</span><span class="n">shade</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.45</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">,)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">y</span><span class="o">=.</span><span class="mo">010</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> 
         <span class="n">s</span><span class="o">=</span><span class="s2">&quot;Leslie is taller than this</span><span class="se">\n</span><span class="s2">{0} shaded proportion</span><span class="se">\n</span><span class="s2">of people in the U.S.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">proportion_of_us_ppl_leslie_taller_than</span><span class="p">),</span> 
         <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;whitesmoke&#39;</span><span class="p">,</span> <span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round, pad=0.25&quot;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribution of U.S. Heights and Leslie&#39;s Ranking&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.012</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;height [inches]&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;probability of occurence&quot;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">15</span><span class="p">);</span>
</pre></div>


<p><img alt="png" src="z_scores_files/z_scores_58_0.png"></p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "1em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>
</section>

  </div>
  
  <!-- start of footer section -->
  <footer class="footer">
    <div class="container">
      <p class="text-muted">
        <center>Thank you for reading my content! This project is available on <a href="https://github.com/frieds/frieds.github.io">GitHub</a>.
          <br/>
          Copyright &copy; Dan Friedman,
          <time datetime="2019">2019</time>.
        </center>
      </p>
    </div>
  </footer>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>

  <!-- This jQuery line finds any span that contains code highlighting classes and then selects the parent <pre> tag and adds a border and background. This is done as a workaround to visually distinguish the code inputs and outputs -->
  <script>
    $( ".hll, .n, .c, .err, .k, .o, .cm, .cp, .c1, .cs, .gd, .ge, .gr, .gh, .gi, .go, .gp, .gs, .gu, .gt, .kc, .kd, .kn, .kp, .kr, .kt, .m, .s, .na, .nb, .nc, .no, .nd, .ni, .ne, .nf, .nl, .nn, .nt, .nv, .ow, .w, .mf, .mh, .mi, .mo, .sb, .sc, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1, .ss, .bp, .vc, .vg, .vi, .il" ).parent( "pre" ).css( "border", "1px solid #038f6d" );
    $( ".hll, .n, .c, .err, .k, .o, .cm, .cp, .c1, .cs, .gd, .ge, .gr, .gh, .gi, .go, .gp, .gs, .gu, .gt, .kc, .kd, .kn, .kp, .kr, .kt, .m, .s, .na, .nb, .nc, .no, .nd, .ni, .ne, .nf, .nl, .nn, .nt, .nv, .ow, .w, .mf, .mh, .mi, .mo, .sb, .sc, .sd, .s2, .se, .sh, .si, .sx, .sr, .s1, .ss, .bp, .vc, .vg, .vi, .il" ).parent( "pre" ).css( "background-color", "#d6eed9" );
  </script>

  <!-- Latest compiled and minified Bootstrap JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="https://dfrieds.com/theme/js/ie10-viewport-bug-workaround.js"></script>
  <!-- <script type="text/javascript">
    $(document).on('click', 'a[href^="#"]', function (event) {
      event.preventDefault();
      $('html, body').animate({
        scrollTop: $($.attr(this, 'href')).offset().top
      }, 500);
    });
  </script> -->

</body>

</html>